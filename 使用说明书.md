# Starboard Analytics 使用说明书

**版本**: 2.1
**最后更新**: 2025-11-30

---

## 📖 目录

1. [快速开始](#快速开始)
2. [功能介绍](#功能介绍)
3. [管理后台使用](#管理后台使用)
4. [常见问题](#常见问题)

---

## 🚀 快速开始

### 第一次使用

#### 1. 安装依赖
```bash
npm install
```

#### 2. 配置Supabase数据库

**步骤A: 创建Supabase项目**
1. 访问 [supabase.com](https://supabase.com) 并注册/登录
2. 点击 "New Project"
3. 填写项目信息：
   - 名称: `starboard-analytics`
   - 密码: 设置一个强密码（记住它！）
   - 区域: Southeast Asia (Singapore)
4. 等待2-3分钟让数据库初始化

**步骤B: 运行数据库脚本**
1. 在Supabase控制台，点击左侧 **SQL Editor**
2. 打开本地文件 `supabase-schema.sql`
3. 复制全部内容
4. 粘贴到SQL Editor
5. 点击 **Run** 执行
6. 确认看到 "Success" 消息

**步骤C: 获取API密钥**
1. 点击 **Project Settings** → **API**
2. 复制以下信息：
   - Project URL
   - anon/public key

#### 3. 配置环境变量

创建 `.env.local` 文件：
```bash
NEXT_PUBLIC_SUPABASE_URL=你的项目URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=你的anon-key
```

#### 4. 启动开发服务器
```bash
npm run dev
```

打开 [http://localhost:3000](http://localhost:3000) 查看网站

#### 5. 创建管理员账号

1. 在网站首页注册一个账号
2. 注册后，去Supabase控制台
3. 点击 **SQL Editor**
4. 运行以下SQL（替换为你的邮箱）：

```sql
UPDATE users
SET role = 'admin'
WHERE email = '你的邮箱@example.com';
```

5. 现在访问 `/admin` 即可进入管理后台

---

## 🎯 功能介绍

### 主页功能

#### 顶部导航栏
```
[锚图标] Starboard Analytics     [Last Update: 日期]     [订阅] [筛选] [设置]
         简介文字
```

- **左侧**: Logo + 网站名称 + 简介 + 最后更新日期
- **右侧**:
  - 🔗 订阅按钮
  - ⏳ 筛选按钮（漏斗图标）
  - ⚙️ 设置按钮

#### 项目卡片

每个卡片包含以下信息：

```
┌─────────────────────────────────────┐
│ Aethir Network           [🔗] [🐦] [✕]│
│ INFRASTRUCTURE                      │
│                                     │
│ 项目描述...                           │
│                                     │
│ $ Raised: $25.0M    📅 Stage: A    │
│ $ Expected: $30     📅 Listed: 3   │
│ ─────────────────────────────────  │
│ What to do:                         │
│ [Daily Check-in] [Staking]          │
│ ─────────────────────────────────  │
│ Lead Investors:                     │
│ [Framework Ventures] [Hashkey]      │
│ ─────────────────────────────────  │
│ Chains:                             │
│ [Ethereum] [BSC] [Polygon]          │
└─────────────────────────────────────┘
```

**卡片字段说明**：
- **Raised**: 融资金额
- **Stage**: 融资阶段（Seed/Series A/B/Pre-TGE/TGE）
- **Expected Costs**: 预期参与成本
- **Listed For**: 项目上线天数
- **What to do**: 需要完成的任务列表
- **Lead Investors**: 领投机构
- **Chains**: 部署的区块链

**右上角图标**：
- 🔗 官网链接
- 🐦 Twitter链接
- ✕ 关闭详情

#### 侧边详情面板

点击卡片后，右侧会弹出详细信息面板：
- 可以拖拽左边缘调整宽度（30%-70%）
- 显示完整的项目分析、策略、风险等
- 卡片自动压缩到左侧

---

## 🔧 管理后台使用

访问 `/admin` 进入管理后台（需要管理员权限）

### 功能标签页

#### 1️⃣ Protocols（协议管理）

**添加新项目**：
1. 点击 **"New Protocol"** 按钮
2. 填写表单：

**基本信息**：
- Protocol Name *（必填）
- Logo URL（选填 - 留空显示首字母）
- Category（类别）
- Stage（阶段）
- Short Description *（简短描述）
- Detailed Analysis（详细分析）

**指标和评分**：
- Ranking Score（排名分数）
- Risk Level（风险等级：Low/Medium/High）
- Total Raised (USD)（融资金额）
- Expected Costs（预期成本）
- Listed For (Days)（上线天数）
- Airdrop Probability（空投概率）
- Founding Team Score（创始团队评分）
- VC Track Record Score（VC履历评分）
- Business Model Score（商业模式评分）
- Featured Protocol（是否推荐）

**链接**：
- Website URL
- Twitter URL
- Discord URL

**What to do（任务）**：
- 输入任务名称，点击"Add"添加
- 例如：Daily Check-in, Staking, Social Tasks

**Lead Investors（投资人）**：
- 输入投资机构名称，点击"Add"添加
- 例如：Framework Ventures, Hashkey Capital

**Chains（区块链）**：
- 输入区块链名称，点击"Add"添加
- 例如：Ethereum, BSC, Polygon

**Risk Factors（风险因素）**：
- 添加项目的风险点

**Strategy（策略）**：
- Entry Strategy（入场策略）
- Exit Strategy（退出策略）

3. 点击 **"Show Preview"** 预览卡片效果
4. 点击 **"Save Protocol"** 保存

**编辑项目**：
- 在列表中点击 **编辑图标**
- 修改后保存

**删除项目**：
- 编辑时点击 **"Delete"** 按钮
- 或在列表中点击 **删除图标**

#### 2️⃣ Database（数据库视图）

查看数据库统计信息：
- 总协议数量
- 总用户数
- 活跃订阅数
- 数据库结构说明

#### 3️⃣ Users（用户管理）

**查看用户列表**：
- 用户邮箱
- 角色（User/Admin）
- 订阅状态
- 订阅等级

**编辑用户**：
1. 点击 **编辑图标**
2. 可修改：
   - Role（角色：User/Admin）
   - Subscription Tier（订阅等级：Free/Premium）
   - Subscription Status（订阅状态：Active/Inactive）
3. 点击 **保存**

---

## ❓ 常见问题

### 数据库相关

**Q: 如何添加chains字段到现有数据库？**

A: 在Supabase SQL Editor运行：
```sql
ALTER TABLE protocols
ADD COLUMN IF NOT EXISTS chains TEXT[] DEFAULT '{}';
```

**Q: 如何批量更新协议数据？**

A: 使用SQL更新：
```sql
UPDATE protocols
SET
  chains = ARRAY['Ethereum', 'BSC'],
  expected_costs = 30,
  listed_days = 3
WHERE id = '协议ID';
```

**Q: Last Update日期如何自动更新？**

A: 数据库有trigger自动更新`last_updated`字段，每次修改协议时会自动更新

### 管理后台

**Q: 无法访问 `/admin`？**

A: 检查：
1. 是否已登录
2. 用户角色是否为'admin'
3. 运行SQL检查：
```sql
SELECT email, role FROM users WHERE email = '你的邮箱';
```

**Q: 如何上传项目Logo？**

A:
1. 将图片上传到图床（如imgur, cloudinary等）
2. 复制图片URL
3. 在编辑器的"Logo URL"字段粘贴
4. 推荐尺寸：256x256px

**Q: Preview预览不更新？**

A: 点击"Hide Preview"再点击"Show Preview"刷新

### 前端显示

**Q: 卡片上的图标不显示？**

A: 确保填写了完整的URL（包括`https://`）

**Q: 如何调整侧边面板宽度？**

A: 鼠标悬停在面板左边缘，会看到调整手柄，点击拖拽即可

**Q: 卡片显示顺序如何调整？**

A: 卡片按`ranking_score`降序排列，修改分数即可调整顺序

### 部署相关

**Q: 如何部署到Vercel？**

A:
```bash
# 安装Vercel CLI
npm install -g vercel

# 部署
vercel

# 在Vercel Dashboard添加环境变量：
# NEXT_PUBLIC_SUPABASE_URL
# NEXT_PUBLIC_SUPABASE_ANON_KEY

# 生产部署
vercel --prod
```

**Q: 部署后无法连接数据库？**

A: 检查Vercel环境变量是否正确配置

---

## 📂 项目文件说明

### 重要文件

- **`supabase-schema.sql`** - 完整数据库结构（首次运行）
- **`migrations/add_chains_field.sql`** - 添加chains字段（已有数据库时）
- **`DATABASE_MIGRATION.md`** - 数据库迁移详细指南
- **`.env.local`** - 环境变量配置（需要自己创建）

### 文件夹结构

```
starboard-analytics/
├── app/                    # Next.js页面
│   ├── admin/             # 管理后台
│   ├── page.tsx           # 主页
│   └── layout.tsx         # 布局
├── components/            # React组件
│   ├── admin/            # 管理组件
│   │   ├── ProtocolEditor.tsx
│   │   ├── ProtocolList.tsx
│   │   ├── DatabaseView.tsx
│   │   └── UserManagement.tsx
│   ├── ProtocolCard.tsx  # 项目卡片
│   └── DetailPanel.tsx   # 详情面板
├── types/                # TypeScript类型
├── lib/                  # 工具函数
└── migrations/           # 数据库迁移
```

---

## 🎨 设计说明

### 配色方案
- 背景：纯黑 (#000000)
- 主色：白色 (#FFFFFF)
- 辅助色：各级灰度
- 极简黑白风格

### 字体
- **标题**: Orbitron（科技感）
- **正文**: Inter（清晰易读）
- **数据**: Space Mono（等宽字体）

---

## 🔗 相关文档

- **[README.md](README.md)** - 项目概述和技术栈
- **[DATABASE_MIGRATION.md](DATABASE_MIGRATION.md)** - 数据库迁移指南
- **[CHANGELOG.md](CHANGELOG.md)** - 版本更新记录
- **[ADMIN_GUIDE.md](ADMIN_GUIDE.md)** - 管理员详细指南
- **[DEPLOYMENT.md](DEPLOYMENT.md)** - 部署指南

---

## 💡 提示和技巧

1. **批量编辑协议**: 使用Supabase Table Editor可以快速编辑多个协议
2. **预览功能**: 编辑时随时使用Preview查看实际效果
3. **备份数据**: 定期导出Supabase数据作为备份
4. **优化图片**: Logo使用WebP格式可以减少加载时间
5. **SEO优化**: 在协议描述中使用关键词提升搜索排名

---

## 📞 技术支持

- **Supabase文档**: [docs.supabase.com](https://supabase.com/docs)
- **Next.js文档**: [nextjs.org/docs](https://nextjs.org/docs)
- **项目仓库**: GitHub Issues

---

**祝使用愉快！** 🚀
